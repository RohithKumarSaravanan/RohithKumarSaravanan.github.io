<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Poem Generator and Emotion Predictor</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-node"></script> <!-- optional if you are using node -->
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f9;
      text-align: center;
    }
    h1 {
      color: #4caf50;
    }
    textarea {
      margin-top: 20px;
      padding: 10px;
      width: 80%;
    }
    button {
      margin-top: 10px;
      background-color: #4caf50;
      color: white;
      padding: 10px 20px;
      border: none;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>Poem Generator and Emotion Predictor</h1>

  <!-- Input for user poem -->
  <textarea id="userPoem" rows="5" placeholder="Enter your poem here..."></textarea>
  <button onclick="predictEmotion()">Predict Emotion</button>
  
  <!-- Output for emotion prediction -->
  <h2 id="emotionOutput">Emotion will appear here...</h2>

  <script>
    let model;

    // Load the TensorFlow.js model from the model.json file
    async function loadModel() {
      // Specify the path to your model folder where model.json is located
      model = await tf.loadGraphModel('path/to/your/model/model.json');
      console.log("Model loaded successfully!");
    }

    // Predict emotion based on input poem
    async function predictEmotion() {
      const poem = document.getElementById("userPoem").value;
      const inputTensor = prepareInput(poem); // You should convert the poem to the format the model expects (e.g., tokenized)

      // Make the prediction
      const prediction = await model.predict(inputTensor);
      const predictedClass = prediction.argMax(-1).dataSync()[0];

      // Map the predicted class to the emotion label
      const emotionLabels = ['Anger', 'Courage', 'Fear', 'Joy', 'Love', 'Peace', 'Sad', 'Surprise'];
      const predictedEmotion = emotionLabels[predictedClass];

      // Display the emotion
      document.getElementById("emotionOutput").innerText = `Predicted Emotion: ${predictedEmotion}`;
    }

    // This function will prepare your input poem (tokenization, padding, etc.) 
    // Make sure this matches the model's input processing
    function prepareInput(poem) {
      // Example of preprocessing: Convert poem text to tensor (this depends on how your model was trained)
      const tensor = tf.tensor([poem.split(' ').map(word => word.length)]); // Example transformation
      return tensor;
    }

    // Load the model when the page loads
    loadModel();
  </script>

</body>
</html>
